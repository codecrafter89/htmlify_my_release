<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release HTML Generator</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
    <style>
        body {
            background-color: #f8f9fa;
        }

        .card {
            margin-bottom: 20px;
        }

        textarea {
            resize: vertical;
        }
    </style>
</head>

<body>
    <div class="container mt-4">
        <h1 class="text-center mb-4">HTMLify My Release</h1>

        <!-- Release Name -->
        <div class="card p-3">
            <label class="form-label">Release Name:</label>
            <input type="text" id="releaseName" class="form-control" placeholder="Enter Release Name">
        </div>

        <!-- Entity Components -->
        <div class="card p-3">
            <h4>Entity Components</h4>
            <div id="entities"></div>
            <button class="btn btn-outline-primary mt-2" onclick="addEntity()">+ Add Entity</button>
        </div>

        <!-- Cloud Flows -->
        <div class="card p-3">
            <h4>Cloud Flows</h4>
            <textarea id="cloudFlows" class="form-control" rows="4"
                placeholder="Enter Cloud Flows, one per line"></textarea>
        </div>

        <!-- Canvas Apps -->
        <div class="card p-3">
            <h4>Canvas Apps</h4>
            <textarea id="canvasApps" class="form-control" rows="4"
                placeholder="Enter Canvas Apps, one per line"></textarea>
        </div>

        <!-- Plugins -->
        <div class="card p-3">
            <h4>Plugins</h4>
            <div id="plugins"></div>
            <button class="btn btn-outline-primary mt-2" onclick="addPlugin()">+ Add Plugin</button>
        </div>

        <!-- Miscellaneous Tasks -->
        <div class="card p-3">
            <h4>Miscellaneous Tasks</h4>
            <textarea id="miscTasks" class="form-control" rows="4"
                placeholder="Enter Miscellaneous Tasks, one per line"></textarea>
        </div>

        <button class="btn btn-success w-100 mb-3" onclick="generateHTML()">Generate HTML</button>

        <h4>Output:</h4>
        <textarea id="outputHTML" class="form-control" rows="12" readonly></textarea>
        <button class="btn btn-secondary mt-2" onclick="downloadHTML()">Download HTML</button>
    </div>

    <!-- Footer -->
    <footer class="text-center mt-4 p-3 bg-light border-top">
        <small>Release HTML Generator © <strong>CodeCrafter.89</strong> — Making releases less painful.</small>
    </footer>

    <script>
        function addEntity() {
            const div = document.createElement('div');
            div.className = 'entity card p-2 mb-2';
            div.innerHTML = `
            <input type="text" placeholder="Entity Name" class="form-control mb-2 entityName" />
            <textarea placeholder="Entity Details" class="form-control entityDetails mb-2" rows="2"></textarea>
            <textarea placeholder="Paste Attributes (one per line)" class="form-control entityAttributes" rows="4"></textarea>
        `;
            document.getElementById('entities').appendChild(div);
        }

        function addPlugin() {
            const div = document.createElement('div');
            div.className = 'plugin card p-2 mb-2';
            div.innerHTML = `
            <input type="text" placeholder="Plugin Name" class="form-control mb-2 pluginName" />
            <textarea placeholder="Paste Steps (one per line)" class="form-control pluginSteps" rows="4"></textarea>
        `;
            document.getElementById('plugins').appendChild(div);
        }

        function generateHTML() {
            const releaseName = document.getElementById('releaseName').value.trim();
            let html = `<html>\n<head>\n<title>${releaseName}</title>\n</head>\n<body style="overflow-wrap: break-word;">\n`;
            html += `<p><strong>${releaseName} Components</strong></p>\n`;

            // Entity Components
            html += `<!-- ENTITY COMPONENTS -->\n<span style="font-size:14px;"><b>Entity Components:</b></span>\n<ul>\n`;
            document.querySelectorAll('.entity').forEach(entity => {
                const name = entity.querySelector('.entityName').value.trim();
                const details = entity.querySelector('.entityDetails').value.trim();
                html += `  <li><b>${name}</b>: ${details}</li>\n`;

                const attributesText = entity.querySelector('.entityAttributes').value.trim();
                if (attributesText) {
                    html += `  <ul>\n    <li><b>Attributes:</b></li>\n    <ul>\n`;
                    attributesText.split('\n').forEach(attr => {
                        if (attr.trim()) html += `      <li>${attr.trim()}</li>\n`;
                    });
                    html += `    </ul>\n  </ul>\n`;
                }
            });
            html += `</ul>\n`;

            // Cloud Flows
            html += `<!-- CLOUD FLOWS -->\n<span style="font-size:14px;"><b>Cloud Flows:</b></span>\n<ul>\n`;
            document.getElementById('cloudFlows').value.split('\n').forEach(flow => {
                if (flow.trim()) html += `  <li><b>${flow.trim()}</b></li>\n`;
            });
            html += `</ul>\n`;

            // Canvas Apps
            html += `<!-- CANVAS APPS -->\n<span style="font-size:14px;"><b>Canvas Apps:</b></span>\n<ul>\n`;
            document.getElementById('canvasApps').value.split('\n').forEach(app => {
                if (app.trim()) html += `  <li><b>${app.trim()}</b></li>\n`;
            });
            html += `</ul>\n`;

            // Plugins
            html += `<!-- PLUGINS -->\n<span style="font-size:14px;"><b>Plugins:</b></span>\n<ul>\n`;
            document.querySelectorAll('.plugin').forEach(plugin => {
                const name = plugin.querySelector('.pluginName').value.trim();
                html += `  <li><b>${name}</b></li>\n`;

                const stepsText = plugin.querySelector('.pluginSteps').value.trim();
                if (stepsText) {
                    html += `  <ul>\n`;
                    stepsText.split('\n').forEach(step => {
                        if (step.trim()) html += `    <li>${step.trim()}</li>\n`;
                    });
                    html += `  </ul>\n`;
                }
            });
            html += `</ul>\n`;

            // Miscellaneous Tasks
            html += `<!-- MISC TASKS -->\n<span style="font-size:14px;"><b>Miscellaneous Tasks:</b></span>\n<ul>\n`;
            document.getElementById('miscTasks').value.split('\n').forEach(task => {
                if (task.trim()) html += `  <li>${task.trim()}</li>\n`;
            });
            html += `</ul>\n`;

            html += `</body>\n</html>`;
            document.getElementById('outputHTML').value = html;
        }

        function downloadHTML() {
            const content = document.getElementById('outputHTML').value;
            const releaseName = document.getElementById('releaseName').value.trim();
            // Fallback if release name is empty
            const fileName = releaseName ? `${releaseName.replace(/\s+/g, '_')}.html` : 'release.html';

            const blob = new Blob([content], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = fileName;
            a.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>

</html>
